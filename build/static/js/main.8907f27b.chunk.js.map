{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","targetId","request","delete","console","log","id","put","Notification","message","className","Error","Person","props","name","number","Persons","personsToDisplay","clickHandler","map","person","onClick","Filter","value","filter","onChange","AddNewPerson","onSubmit","handler","newName","nameChangeHandler","newNumber","numberChangeHandler","type","App","useState","persons","setPersons","setNewName","setNewNumber","filterValue","setNewFilter","infoMessage","setInfoMessage","errorMessage","setErrorMessage","useEffect","personService","initialData","find","toUpperCase","search","event","target","preventDefault","foundIndex","findIndex","foundEntry","window","confirm","nameObject","returnedPerson","setTimeout","catch","error","concat","returnedData","newPersons","ReactDOM","render","document","getElementById"],"mappings":"yMAEMA,EAAU,eAwBD,EAtBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAoB9B,EAjBA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAe9B,EAZK,SAACG,GACjB,IAAMC,EAAUR,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAE3C,OADAG,QAAQC,IAAR,UAAeZ,EAAf,YAA0BQ,IACnBC,EAAQN,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAS9B,EANA,SAACQ,EAAIP,GAChB,IAAMG,EAAUR,IAAMa,IAAN,UAAad,EAAb,YAAwBa,GAAMP,GAE9C,OADAK,QAAQC,IAAI,WAAZ,UAA2BZ,EAA3B,YAAsCa,IAC/BJ,EAAQN,MAAK,SAAAC,GAAQ,OAAIA,EAASC,S,OCnBvCU,EAAe,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACrB,OAAa,OAAVA,EACM,KAGP,qBAAKC,UAAU,OAAf,SACGD,KAIDE,EAAQ,SAAC,GAAc,IAAbF,EAAY,EAAZA,QACd,OAAa,OAAVA,EACM,KAGP,qBAAKC,UAAU,QAAf,SACGD,KAKDG,EAAS,SAACC,GACd,OACE,+BAAKA,EAAMC,KAAX,IAAkBD,EAAME,WAItBC,EAAU,SAAC,GAAsC,IAArCC,EAAoC,EAApCA,iBAAkBC,EAAkB,EAAlBA,aAClC,OACED,EAAiBE,KAAI,SAAAC,GAAM,OACzB,gCACE,cAAC,EAAD,CAAQN,KAAOM,EAAON,KAAMC,OAAQK,EAAOL,SAC3C,wBAAQM,QAAW,kBAAMH,EAAaE,EAAOd,GAAIc,EAAON,OAAxD,wBAFQM,EAAON,UAQjBQ,EAAS,SAACT,GACd,OACE,qDACoB,uBAAOU,MAAOV,EAAMW,OAAQC,SAAUZ,EAAMY,eAK9DC,EAAe,SAACb,GACpB,OACI,uBAAMc,SAAUd,EAAMe,QAAtB,UACE,yCACQ,uBAAOL,MAAOV,EAAMgB,QAASJ,SAAUZ,EAAMiB,uBAErD,2CACU,uBAAOP,MAAOV,EAAMkB,UAAWN,SAAUZ,EAAMmB,yBAEzD,8BACE,wBAAQC,KAAK,SAAb,uBAqIKC,EA9HH,SAACrB,GACX,MAA+BsB,mBAAStB,EAAMuB,SAA9C,mBAAQA,EAAR,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAQN,EAAR,KAAiBS,EAAjB,KACA,EAAoCH,mBAAS,IAA7C,mBAAQJ,EAAR,KAAmBQ,EAAnB,KACA,EAAqCJ,mBAAS,IAA9C,mBAAQK,EAAR,KAAqBC,EAArB,KACA,EAAuCN,mBAAS,MAAhD,mBAAQO,EAAR,KAAqBC,EAArB,KACA,EAAyCR,mBAAS,MAAlD,mBAAQS,EAAR,KAAsBC,EAAtB,KAEAC,qBAAU,WACRC,IAEGnD,MAAK,SAAAoD,GACJX,EAAWW,QAEd,IAEH,IA6FM/B,EAAmBmB,EAAQZ,QADD,SAACyB,GAAD,OAAUA,EAAKnC,KAAKoC,cAAcC,OAAOX,EAAYU,gBAAkB,KAKvG,OAHA9C,QAAQC,IAAI+B,GACZhC,QAAQC,IAAIY,GAGV,gCACE,2CACA,cAAC,EAAD,CAAcR,QAASiC,IACvB,cAAC,EAAD,CAAOjC,QAASmC,IAChB,cAAC,EAAD,CAAQpB,OAAUgB,EAAaf,SAtGR,SAAC2B,GAC1BhD,QAAQC,IAAI+C,EAAMC,OAAO9B,OACzBkB,EAAaW,EAAMC,OAAO9B,UAqGxB,cAAC,EAAD,CAAcK,QA7FK,SAACwB,GACtBA,EAAME,iBACNlD,QAAQC,IAAI,iBAAkB+C,GAE9B,IACMG,EAAanB,EAAQoB,WADT,SAACP,GAAD,OAAUA,EAAKnC,KAAKoC,gBAAkBrB,EAAQqB,iBAGhE,GAAIK,GAAc,EAAG,CACnB,IAAME,EAAarB,EAAQmB,GAE3B,GADAnD,QAAQC,IAAI,wBAAyBoD,EAAW3C,MAC7C4C,OAAOC,QAAP,UAAkBF,EAAW3C,KAA7B,2EAA4G,CAC7G,IAAM8C,EAAU,2BAAOH,GAAP,IAAmB1C,OAAQgB,IAC3C3B,QAAQC,IAAI,sBAAuBuD,GACnCxD,QAAQC,IAAI,uBAAwBoD,GACpCV,EACUU,EAAWnD,GAAIsD,GACtBhE,MAAK,SAAAiE,GACJzD,QAAQC,IAAI,UACZgC,EAAWD,EAAQjB,KAAI,SAAAC,GAAM,OAAIA,EAAOd,KAAOmD,EAAWnD,GAAKc,EAASyC,MACxElB,EAAe,IAAD,OAAKiB,EAAW9C,KAAhB,4BACdgD,YAAW,WACTnB,EAAe,QACd,QAEJoB,OAAM,SAAAC,GACLnB,EAAgB,IAAD,OAAKe,EAAW9C,KAAhB,sCACfgD,YAAW,WACTjB,EAAgB,QACf,aAGJ,CACL,IAAMe,EAAa,CACjB9C,KAAMe,EACNd,OAAQgB,GAEVgB,EACUa,GACPhE,MAAK,SAAAiE,GACJxB,EAAWD,EAAQ6B,OAAOJ,IAC1BlB,EAAe,IAAD,OAAKiB,EAAW9C,KAAhB,iBACdgD,YAAW,WACTnB,EAAe,QACd,QAEJoB,OAAM,SAAAC,GACL5D,QAAQC,IAAI2D,EAAMnE,UAClBgD,EAAgB,GAAD,OAAImB,EAAMnE,SAASC,KAAKkE,QACvCF,YAAW,WACTjB,EAAgB,QACf,QAGTP,EAAW,IACXC,EAAa,KAuC8BT,kBArCpB,SAACsB,GACxBhD,QAAQC,IAAI+C,EAAMC,OAAO9B,OACzBe,EAAWc,EAAMC,OAAO9B,QAmC0DS,oBAlGzD,SAACoB,GAC1BhD,QAAQC,IAAI+C,EAAMC,OAAO9B,OACzBgB,EAAaa,EAAMC,OAAO9B,QAiGtBQ,UAAaA,EAAWF,QAAWA,IACrC,yCACE,cAAC,EAAD,CAASZ,iBAAkBA,EAAkBC,aAnCxB,SAACZ,EAAIQ,GAC9BV,QAAQC,IAAI,6BAA8BC,GAC1CF,QAAQC,IAAR,wCAA6CC,IAE1CoD,OAAOC,QAAP,iBAAyB7C,EAAzB,QACDiC,EACezC,GACZV,MAAK,SAAAsE,GACF9D,QAAQC,IAAI+B,EAAQZ,QAAO,SAACJ,GAAD,OAAYA,EAAOd,KAAOA,MACrD,IAAM6D,EAAa/B,EAAQZ,QAAO,SAACJ,GAAD,OAAYA,EAAOd,KAAOA,KAC5D+B,EAAW8B,MAEdJ,OAAM,SAAAC,GACLnB,EAAgB,IAAD,OAAK/B,EAAL,sCACfgD,YAAW,WACTjB,EAAgB,QACf,e,MC9JbuB,IAASC,OACP,cAAC,EAAD,CAAKjC,QARS,CACd,CACEtB,KAAM,cACNC,OAAQ,gBAMVuD,SAASC,eAAe,W","file":"static/js/main.8907f27b.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteEntry = (targetId) => {\r\n    const request = axios.delete(`${baseUrl}/${targetId}`)\r\n    console.log(`${baseUrl}/${targetId}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    console.log('updating', `${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll, create, deleteEntry, update\r\n}","import React, { useEffect, useState } from 'react'\n\nimport personService from './services/persons'\n\nconst Notification = ({message}) => {\n  if(message===null) {\n    return null\n  }\n  return (\n    <div className=\"info\">\n      {message}\n    </div>\n  )\n}\nconst Error = ({message})=> {\n  if(message===null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )  \n}\n\nconst Person = (props) => {\n  return (\n    <li>{props.name} {props.number}</li>\n  )\n}\n\t\nconst Persons = ({personsToDisplay, clickHandler}) => {\n  return (\n    personsToDisplay.map(person => \n      <div key={person.name}>\n        <Person name= {person.name} number={person.number}/> \n        <button onClick = {() => clickHandler(person.id, person.name)}> delete </button>\n      </div>\n      \n  ))\n}\n\nconst Filter = (props) => {\n  return(\n    <div>\n      filter shown with <input value={props.filter} onChange={props.onChange} />\n    </div>\n  )\n}\n\nconst AddNewPerson = (props) => {\n  return (\n      <form onSubmit={props.handler}>\n        <div>\n          name: <input value={props.newName} onChange={props.nameChangeHandler}/>\n        </div>\n        <div> \n          number: <input value={props.newNumber} onChange={props.numberChangeHandler} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n\n  )\n}\n\nconst App = (props) => {\n  const [ persons, setPersons] = useState(props.persons) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterValue, setNewFilter] = useState('')\n  const [ infoMessage, setInfoMessage] = useState(null)\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialData => {\n        setPersons(initialData)\n      })\n  }, [])\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleAddEntry = (event) =>{\n    event.preventDefault()\n    console.log('button clicked', event)\n    \n    const isInArray = (find) => find.name.toUpperCase() === newName.toUpperCase()\n    const foundIndex = persons.findIndex(isInArray)\n\n    if( foundIndex > -1) {\n      const foundEntry = persons[foundIndex]\n      console.log('nimi on jo listassa: ', foundEntry.name)\n      if(window.confirm(`${foundEntry.name} is already added to phonebook, replace the old number with a new one?`)) {\n        const nameObject = {...foundEntry, number: newNumber}\n        console.log(\"on listassa, uusi: \", nameObject)\n        console.log(\"on listassa, vanha: \", foundEntry)\n        personService\n          .update(foundEntry.id, nameObject) \n          .then(returnedPerson => {\n            console.log('update')\n            setPersons(persons.map(person => person.id !== foundEntry.id ? person : returnedPerson))          \n            setInfoMessage(`'${nameObject.name}' successfully updated!`)\n            setTimeout(() => {\n              setInfoMessage(null)\n            }, 5000)\n          })\n          .catch(error =>{\n            setErrorMessage(`'${nameObject.name}' was already deleted from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else {\n      const nameObject = {\n        name: newName,\n        number: newNumber,\n      }\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setInfoMessage(`'${nameObject.name}' was added!`)\n          setTimeout(()=>{\n            setInfoMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response)\n          setErrorMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  \n  const handleDeleteButton = (id, name) => {\n    console.log(\"delete button pressed on: \", id)\n    console.log(`http://localhost:3001/persons/${id}`)\n\n    if(window.confirm(`Delete ${name} ?`)) {\n      personService\n        .deleteEntry(id)\n        .then(returnedData => {\n            console.log(persons.filter((person) => person.id !== id))\n            const newPersons = persons.filter((person) => person.id !== id)\n            setPersons(newPersons)\n        })\n        .catch(error =>{\n          setErrorMessage(`'${name}' was already deleted from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const containsCaseInsensitive = (find) => find.name.toUpperCase().search(filterValue.toUpperCase()) > -1\n  const personsToDisplay = persons.filter(containsCaseInsensitive)\n  console.log(persons)\n  console.log(personsToDisplay)\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={infoMessage} />\n      <Error message={errorMessage} />\n      <Filter filter = {filterValue} onChange = {handleFilterChange}/>\n      <AddNewPerson handler = {handleAddEntry} nameChangeHandler = {handleNameChange} numberChangeHandler = {handleNumberChange}\n        newNumber = {newNumber} newName = {newName}/>\n      <h2>Numbers</h2>      \n        <Persons personsToDisplay={personsToDisplay} clickHandler = {handleDeleteButton}/>\n    </div>\n  )\n}\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nconst persons = [\n  {\n    name: \"Arto Hellas\",\n    number: \"123456789\"\n  }\n]\n\nReactDOM.render(\n  <App persons={persons}/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}